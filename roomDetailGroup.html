<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Poolin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background-color: #CFF1F9;
        }
    </style>
</head>

<body class="flex h-screen overflow-hidden">

<!-- SIDEBAR -->
<aside class="w-64 bg-gradient-to-b from-[#050691] to-[#0608C4] text-white p-6 flex flex-col">
    <div class="text-3xl font-bold mb-4 flex items-center gap-2">
        <img src="D:/Poolin/assets/logoPoolin.png" class="w-30 opacity90" />
    </div>

    <nav class="space-y-2">

        <!-- HOME -->
        <a class="flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition 
                  hover:bg-[#023E8A] hover:shadow"
           href="dashboardGroup.html">
            <img src="D:/Poolin/assets/homePage.png" class="w-8 h-8" />
            <span>Home</span>
        </a>

        <!-- MY ROOMS (ACTIVE) -->
        <div class="flex items-center gap-3 bg-[#023E8A] px-4 py-3 rounded-xl font-bold shadow">
            <img src="D:/Poolin/assets/meeting.png" class="w-8 h-8" />
            <span>My Rooms</span>
        </div>

        <!-- CONTRIBUTION -->
        <a class="flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition 
                  hover:bg-[#023E8A] hover:shadow"
           href="contributionGroup.html">
            <img src="D:/Poolin/assets/donation.png" class="w-8 h-8" />
            <span>Contribution</span>
        </a>

        <!-- SETTING -->
        <a class="flex items-center gap-3 px-4 py-3 rounded-xl font-bold transition 
                  hover:bg-[#023E8A] hover:shadow"
           href="settingGroup.html">
            <img src="D:/Poolin/assets/accountSetting.png" class="w-8 h-8" />
            <span>Account Setting</span>
        </a>

    </nav>
</aside>

 <!-- ========== MAIN CONTENT ========== -->
<main class="flex-1 p-8 overflow-y-auto">

    <!-- Top Section -->
    <div class="mb-6">

        <!-- Back Button -->
        <button onclick="window.location.href='myRoomsGroup.html'"
                class="inline-flex items-center gap-2 bg-[#023E8A] text-white px-4 py-2 rounded-xl font-semibold shadow hover:bg-[#0353A4] transition mb-4">
            Back to my Rooms
        </button>

        <!-- Title Section -->
        <div class="flex items-center gap-3">
            <div>
                <h1 class="text-3xl font-bold text-[#03045E]">
                    <span id="roomName"></span>
                    <span id="roomCode" class="font-semibold text-2xl ml-1"></span>
                </h1>
                <p id="roomMeta" class="text-blue-800 mt-1"></p>
            </div>
        </div>

    </div>

    <!-- ========== PROGRESS BOX ========== -->
    <div class="w-full bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6">

        <h2 class="text-xl font-bold text-[#03045E] mb-4">Progress</h2>

        <div class="flex justify-between items-center mb-2">
            <p id="targetAmountText" class="text-gray-700">
                Target Amount: <strong>-</strong>
            </p>

            <span class="text-green-700 border border-green-500 px-3 py-1 rounded-lg text-sm font-semibold bg-green-50">
                ‚óè Active
            </span>
        </div>

        <p id="progressText" class="text-gray-700"></p>

        <!-- Progress Bar -->
        <div class="mt-4 w-full bg-gray-200 rounded-full h-5 overflow-hidden">
            <div class="h-full rounded-full"
                 style="width: 60%;
                        background: linear-gradient(90deg, #050691 0%, #0608C4 50%, #03045E 100%)">
            </div>
        </div>
    </div>

    <!-- ========== SEARCH BAR ========== -->
    <div class="w-full flex justify-center mb-6">
        <div class="relative w-1/2">
            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">
                üîç
            </span>
            <input id="searchInput"
                type="text"
                placeholder="Search member..."
                class="w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl shadow-sm 
                    focus:ring-2 focus:ring-[#023E8A] outline-none">
        </div>
    </div>

    <!-- ========== MEMBER LIST BOX ========== -->
    <div class="w-full bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6">

        <h2 class="text-xl font-bold text-[#03045E] mb-4">Member List</h2>

        <div id="memberList" class="space-y-3"></div>

        <!-- Pagination -->
        <div class="flex justify-between items-center mt-5">
            <button id="prevBtn"
                    class="px-4 py-2 bg-gray-200 rounded-xl hover:bg-gray-300 disabled:opacity-40"
                    disabled>
                Previous
            </button>

            <button id="nextBtn"
                    class="px-4 py-2 bg-[#03045E] text-white rounded-xl hover:bg-[#001a78]">
                Next
            </button>
        </div>
    </div>

    <!-- ========== MEMBER CONTRIBUTION BOX ========== -->
    <div class="w-full bg-white rounded-2xl shadow-lg border border-gray-200 p-6 mb-6">

        <h2 class="text-xl font-bold text-[#03045E] mb-4">Member Contribution</h2>

        <ul class="space-y-3 text-gray-700 text-lg">

            <li class="border-b pb-3">
                üë®‚Äçü¶∞ <span class="font-semibold">Andi</span> deposits Rp200.000
                <span class="text-sm text-gray-500">‚Ä¢ 4 days ago</span>
            </li>

            <li class="border-b pb-3">
                üë® <span class="font-semibold">Rian</span> deposits Rp120.000
                <span class="text-sm text-gray-500">‚Ä¢ 1 week ago</span>
            </li>

            <li class="border-b pb-3">
                üë®‚Äçü¶± <span class="font-semibold">Bagas</span> deposits Rp100.000
                <span class="text-sm text-gray-500">‚Ä¢ 2 weeks ago</span>
            </li>

        </ul>
    </div>

</main>

<script>
document.addEventListener("DOMContentLoaded", () => {

    // ===============================
    // AMBIL ID ROOM DARI URL
    // ===============================
    const params = new URLSearchParams(window.location.search);
    const roomId = params.get("id");

    const rooms = JSON.parse(localStorage.getItem("rooms")) || [];
    const room = rooms.find(r => r.id === roomId);

    if (!room) {
        document.getElementById("roomName").innerText = "Room not found";
        document.getElementById("roomMeta").innerText = "";
        return;
    }

    // ===============================
    // SET HEADER
    // ===============================
    document.getElementById("roomName").innerText = room.name;
    document.getElementById("roomCode").innerText = `- ${room.code || "-"}`;
    document.getElementById("roomMeta").innerText =
    `${room.frequency || "Monthly"} ‚Ä¢ ${room.members?.length || 0} members`;

    // ===============================
    // SET PROGRESS
    // ===============================
    const current = Number(room.currentAmount || 0);
    const target = Number(room.target || 0);
    const percent = target ? Math.min((current / target) * 100, 100) : 0;

    document.getElementById("targetAmountText").innerHTML =
        `Target Amount: <strong>Rp${target.toLocaleString("id-ID")}</strong>`;

    document.getElementById("progressText").innerText =
        `Rp${current.toLocaleString("id-ID")} collected from Rp${target.toLocaleString("id-ID")}`;

    document.querySelector(".h-5 > div").style.width = percent + "%";

    // ===============================
    // MEMBER LIST (OPSIONAL)
    // ===============================
    const memberList = document.getElementById("memberList");

    if (!room.members || room.members.length === 0) {
        memberList.innerHTML =
            "<p class='text-gray-500'>No members found.</p>";
        return;
    }

    memberList.innerHTML = room.members.map(member => `
    <div class="flex items-center justify-between p-3 rounded-xl border">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-blue-200 text-blue-900 rounded-full 
                        flex items-center justify-center font-bold">
                ${member.name.charAt(0)}
            </div>
            <div>
                <p class="font-bold text-[#03045E]">${member.name}</p>
                <p class="text-sm text-gray-600">${member.role || "Member"}</p>
            </div>
        </div>
    </div>
`).join("");

});
</script>

</body>
</html>
