<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Poolin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body class="flex h-screen overflow-hidden bg-[#CFF1F9]">

    <!-- SIDEBAR -->
    <aside class="w-64 bg-gradient-to-b from-[#050691] to-[#0608C4] text-white p-6 flex flex-col">
        <div class="text-3xl font-bold mb-0 flex items-center gap-2">
            <img src="D:/Poolin/assets/logoPoolin.png" class="w-30 opacity90" />
        </div>

        <nav class="space-y-2">
            <a class="flex items-center gap-3 px-4 py-3 rounded-xl font-bold hover:bg-[#023E8A] hover:shadow-lg transition">
                <img src="D:/Poolin/assets/homePage.png" class="w-8 opacity-90" />
                Home
            </a>

            <div class="flex items-center gap-3 bg-[#023E8A] px-4 py-3 rounded-xl font-bold shadow-lg">
                <img src="D:/Poolin/assets/savings.png" class="w-8 opacity-90" />
                My Goals
            </div>

            <a class="flex items-center gap-3 px-4 py-3 rounded-xl font-bold hover:bg-[#023E8A] hover:shadow-lg transition">
                <img src="D:/Poolin/assets/report.png" class="w-8 opacity-90" />
                Report
            </a>

            <a class="flex items-center gap-3 px-4 py-3 rounded-xl font-bold hover:bg-[#023E8A] hover:shadow-lg transition">
                <img src="D:/Poolin/assets/setting.png" class="w-8 opacity-90" />
                Setting
            </a>
        </nav>
    </aside>


    <!-- MAIN CONTENT -->
    <main class="flex-1 p-8 overflow-hidden">

        <!-- HEADER -->
        <div class="flex justify-between items-center mb-8">
            <div class="flex items-center gap-3">
                <img src="D:/Poolin/assets/savings.png" class="w-10 opacity-90" />
                <div>
                    <h1 class="text-3xl font-bold text-[#03045E]">My Goals</h1>
                    <p class="text-blue-800 -mt-1">Manage all your saving goals</p>
                </div>
            </div>

            <!-- Personal/Group Switch -->
            <div id="toggleSwitch" class="flex items-center bg-white rounded-full p-1 shadow-md border border-[#03045E]">
                <button id="btnPersonal"
                    class="px-4 py-1.5 rounded-full bg-[#03045E] text-white text-sm font-semibold">
                    Personal
                </button>
                <button id="btnGroup"
                    class="px-4 py-1.5 rounded-full text-[#03045E] text-sm font-semibold">
                    Group
                </button>
            </div>
        </div>

        <!-- TABS -->
        <div class="flex justify-between items-center mb-6">
            <div class="flex bg-white rounded-xl border border-blue-300 shadow overflow-hidden">
                <button id="tabActive" 
                        class="px-5 py-2 text-blue-700 font-bold hover:bg-blue-50 transition-colors duration-300">
                <a href="myGoalsActive.html?tab=active" class="block w-full h-full">Active</a>
                </button>
                <button id="tabFinished" 
                        class="px-5 py-2 text-blue-700 font-bold hover:bg-blue-50 transition-colors duration-300">
                 <a href="myGoalsFinished.html?tab=finished" class="block w-full h-full">Finished</a>
                </button>
            </div>
            <button
                class="px-5 py-2 bg-[#0608C4] hover:bg-[#050691] transition text-white rounded-xl font-semibold shadow cursor-pointer">
                <a href="createGoalPersonal.html" class="block w-full h-full">+ Create a New Goal</a>
            </button>
        </div>

        <!-- GOAL CARDS (Scroll Only This Area) -->
        <div id="goalContainer" class="max-w-[1150px] mx-auto h-[70vh] overflow-y-auto space-y-6 pr-2">
            <!-- Finished goals will be rendered here -->
        </div>
    </main>

    <script>
        // Toggle Personal / Group
        const btnPersonal = document.getElementById("btnPersonal");
        const btnGroup = document.getElementById("btnGroup");

        btnPersonal.addEventListener("click", () => {
            btnPersonal.classList.add("bg-[#03045E]", "text-white");
            btnGroup.classList.remove("bg-[#03045E]", "text-white");
            btnGroup.classList.add("text-[#03045E]");
        });

        btnGroup.addEventListener("click", () => {
            btnGroup.classList.add("bg-[#03045E]", "text-white");
            btnPersonal.classList.remove("bg-[#03045E]", "text-white");
            btnPersonal.classList.add("text-[#03045E]");
        });

        // Save Now buttons
        document.querySelectorAll(".save-btn").forEach(btn => {
            btn.addEventListener("click", () => alert("Saving action triggered!"));
        });
    </script>

    <script>
        // Data contoh goals sudah selesai
        const finishedGoals = [
            {
                id: 1,
                title: "Liburan Bali",
                image: "bali.jpeg",
                finishedDate: "2026-06-16",
                collected: 15000000
            },
            {
                id: 2,
                title: "Smartphone Baru",
                image: "hp.png",
                finishedDate: "2025-12-31",
                collected: 10000000
            }
        ];

         function renderFinishedGoals() {
            const container = document.getElementById('goalContainer');
            container.innerHTML = '';

            if (finishedGoals.length === 0) {
                container.innerHTML = `<p class="text-center text-gray-500 text-lg">No finished goals found.</p>`;
                return;
            }

            finishedGoals.forEach(goal => {
                const card = document.createElement('div');
                card.className = "bg-white rounded-2xl shadow-lg border border-gray-200 p-5 w-full";

                card.innerHTML = `
                    <div class="flex items-center gap-5 justify-between">
                        <img src="D:/Poolin/assets/${goal.image}" class="w-24 h-24 rounded-xl object-cover" />
                        
                        <div class="flex-1 mx-6">
                            <h2 class="text-xl font-bold text-[#03045E]">${goal.title}</h2>
                            <p class="text-sm text-gray-500 mt-1">Finished on: <strong>${goal.finishedDate}</strong></p>
                            <p class="text-green-700 font-semibold mt-2">ðŸŽ‰ Congratulations! You've achieved your goal! ðŸŽ‰</p>
                        </div>

                        <div class="flex flex-col items-end min-w-[140px]">
                            <p class="text-gray-700 font-semibold">Total Collected:</p>
                            <p class="text-[#023E8A] text-lg font-bold">Rp ${goal.collected.toLocaleString()}</p>
                            <div class="mt-4 bg-green-600 text-white px-4 py-1 rounded-full font-bold text-sm whitespace-nowrap">
                                100% Achieved
                            </div>
                        </div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        // Render finished goals saat halaman dibuka
        renderFinishedGoals();
    </script>

    <script>
        // Tab buttons
        const tabActive = document.getElementById('tabActive');
        const tabFinished = document.getElementById('tabFinished');

        function activateTab(tab) {
            if(tab === 'active') {
                tabActive.classList.add('bg-blue-100', 'text-blue-900', 'font-bold');
                tabActive.classList.remove('text-blue-700', 'hover:bg-blue-50');

                tabFinished.classList.remove('bg-blue-100', 'text-blue-900', 'font-bold');
                tabFinished.classList.add('text-blue-700', 'hover:bg-blue-50');
                
                showGoals('active');
            } else {
                tabFinished.classList.add('bg-blue-100', 'text-blue-900', 'font-bold');
                tabFinished.classList.remove('text-blue-700', 'hover:bg-blue-50');

                tabActive.classList.remove('bg-blue-100', 'text-blue-900', 'font-bold');
                tabActive.classList.add('text-blue-700', 'hover:bg-blue-50');
                
                showGoals('finished');
            }
        }

        tabActive.addEventListener('click', () => activateTab('active'));
        tabFinished.addEventListener('click', () => activateTab('finished'));

        // Default tab
        activateTab('finished'); // karena ini halaman Finished

        function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
        }

        const activeTab = getQueryParam('tab');

        if (activeTab === 'finished') {
        activateTab('finished');
        } else {
        activateTab('active'); // default tab aktif adalah 'active'
        }
    </script>
</body>

</html>
